#include<graphics.h>


void page_show();     //开始页面展示

void map_show();       //地图展示

int map[26][26] =
{
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,2,2,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,2,2,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0},
	{0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0},
	{1,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1},
	{2,2,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,2,2},
	{0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0},
	{0,0,1,1,0,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,1,1,0,0},
	{0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0}
};

int  main()
{
	//开始页面展示
	page_show();

	map_show();

	system("pause");
	return 0;
}

//地图展示
void map_show()
{
	int i, j;
	IMAGE home_wall, img_wall_1, img_wall_2;
	loadimage(&home_wall, _T("home.jpg"), 50, 50);
	loadimage(&img_wall_1, _T("wall1.jpg"), 25, 25);
	loadimage(&img_wall_2, _T("wall2.jpg"), 25, 25);

	for (i = 0; i < 26; i++)
	{
		for (j = 0; j < 26; j++)
		{
			switch (map[i][j])
			{
			case 1:
				putimage(j * 25, i * 25, &img_wall_2);
				break;
			case 2:
				putimage(j * 25, i * 25, &img_wall_1);
				break;
			case 3:
				putimage(j * 25, i * 25, &home_wall);
				map[i + 1][j] = 4;
				map[i][j + 1] = 4;
				map[i + 1][j + 1] = 4;
				break;
			case 4:
				break;
			}
		}
	}
}

//开始页面展示
void page_show()
{
	initgraph(650, 650);

	//显示logo
	IMAGE logo;
	loadimage(&logo, _T("logo.bmp"), 433, 147);
	putimage(110, 20, &logo);


	//画按钮
	setlinecolor(WHITE);
	setfillcolor(BLACK);
	fillrectangle(150, 200, 220, 240);
	fillrectangle(400, 200, 470, 240);
	outtextxy(165, 215, _T("说明"));
	outtextxy(415, 215, _T("开始"));

	//鼠标事件
	MOUSEMSG mouse;
	IMAGE illustrate;
	loadimage(&illustrate, _T("illustrate.jpg"), 300, 300);

	while (1)
	{
		mouse = GetMouseMsg();
		switch (mouse.uMsg)
		{
		case WM_MOUSEMOVE:
		{
			if ((mouse.x > 150 && mouse.x < 220) && (mouse.y > 200 && mouse.y < 240))
			{
				putimage(150, 250, &illustrate);
			}
			else
			{
				solidrectangle(150, 250, 450, 550);
			}

			break;
		}
		case WM_LBUTTONDOWN:
		{
			if ((mouse.x > 400 && mouse.x < 470) && (mouse.y > 200 && mouse.y < 240))
			{
				cleardevice();
				return;
			}
			break;
		}
		}
	}
}